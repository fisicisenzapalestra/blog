<!DOCTYPE html><html lang="it"><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><title>smartlight - Accendere un led dalla porta seriale - Fisici Senza Palestra</title><meta name="description" content="Con questo articolo cominciamo un percorso che ci porterà alla scrittura di un semplice sistema per gestire un led tramite la porta seriale."><meta name="generator" content="Publii Open-Source CMS for Static Site"><link rel="canonical" href="https://fisicisenzapalestra.com/smartlight-accendere-un-led-dalla-porta-seriale-parte-1.html"><link rel="alternate" type="application/atom+xml" href="https://fisicisenzapalestra.com/feed.xml"><link rel="alternate" type="application/json" href="https://fisicisenzapalestra.com/feed.json"><meta property="og:title" content="smartlight - Accendere un led dalla porta seriale"><meta property="og:image" content="https://fisicisenzapalestra.com/media/posts/37/Schermata-2014-03-25-alle-23.50.241.png"><meta property="og:site_name" content="Fisici Senza Palestra | making science cool again"><meta property="og:description" content="Con questo articolo cominciamo un percorso che ci porterà alla scrittura di un semplice sistema per gestire un led tramite la porta seriale."><meta property="og:url" content="https://fisicisenzapalestra.com/smartlight-accendere-un-led-dalla-porta-seriale-parte-1.html"><meta property="og:type" content="article"><meta name="twitter:card" content="summary"><meta name="twitter:site" content="@fisiciSP"><meta name="twitter:title" content="smartlight - Accendere un led dalla porta seriale"><meta name="twitter:description" content="Con questo articolo cominciamo un percorso che ci porterà alla scrittura di un semplice sistema per gestire un led tramite la porta seriale."><meta name="twitter:image" content="https://fisicisenzapalestra.com/media/posts/37/Schermata-2014-03-25-alle-23.50.241.png"><link rel="shortcut icon" href="https://fisicisenzapalestra.com/media/website/login.png" type="image/x-icon"><link rel="preconnect" href="https://fonts.gstatic.com/" crossorigin><link href="https://fonts.googleapis.com/css?family=Ubuntu:400,700&amp;subset=latin-ext&amp;display=swap" rel="stylesheet"><style>:root{--body-font:'Ubuntu',sans-serif;--heading-font:var(--body-font);--post-entry-font:var(--body-font);--logo-font:var(--body-font);--menu-font:var(--body-font)}</style><link rel="stylesheet" href="https://fisicisenzapalestra.com/assets/css/style.css?v=4c6cb76764e0b9241467abb2863e54fe"><script type="application/ld+json">{"@context":"http://schema.org","@type":"Article","mainEntityOfPage":{"@type":"WebPage","@id":"https://fisicisenzapalestra.com/smartlight-accendere-un-led-dalla-porta-seriale-parte-1.html"},"headline":"smartlight - Accendere un led dalla porta seriale","datePublished":"2020-04-14T11:20","dateModified":"2020-04-14T11:20","image":{"@type":"ImageObject","url":"https://fisicisenzapalestra.com/media/posts/37/Schermata-2014-03-25-alle-23.50.241.png","height":433,"width":823},"description":"Con questo articolo cominciamo un percorso che ci porterà alla scrittura di&hellip;","author":{"@type":"Person","name":"Raffaele Farinaro"},"publisher":{"@type":"Organization","name":"Raffaele Farinaro","logo":{"@type":"ImageObject","url":"https://fisicisenzapalestra.com/media/website/bitmap.png","height":86,"width":300}}}</script><script async src="https://www.googletagmanager.com/gtag/js?id=UA-67524278-1"></script><script>window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-67524278-1');</script><script type="text/javascript" id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script></head><body><div class="container"><header class="top" id="js-top"><div><a class="logo" href="https://fisicisenzapalestra.com/"><img src="https://fisicisenzapalestra.com/media/website/bitmap.png" alt="Fisici Senza Palestra"></a><nav class="navbar"><button class="navbar__toggle" aria-label="Menu" aria-haspopup="true" aria-expanded="false"><span class="navbar__toggle-box"><span class="navbar__toggle-inner">Menu</span></span></button><ul class="navbar__menu"><li><a href="https://fisicisenzapalestra.com/" target="_self">Home</a></li><li class="has-submenu"><span class="is-separator" aria-haspopup="true">Articoli</span><ul class="navbar__submenu level-2" aria-hidden="true"><li class="has-submenu"><span class="is-separator" aria-haspopup="true">Scienze</span><ul class="navbar__submenu level-3" aria-hidden="true"><li><a href="https://fisicisenzapalestra.com/dalweb/" target="_self">Dal web</a></li><li><a href="https://fisicisenzapalestra.com/dubbi-esistenziali/" target="_self">Dubbi esistenziali</a></li><li><a href="https://fisicisenzapalestra.com/medicina/" target="_self">Esplorando il corpo umano</a></li><li><a href="https://fisicisenzapalestra.com/paradossi/" target="_self">Paradossi</a></li><li><a href="https://fisicisenzapalestra.com/scoperte/" target="_self">Scoperte</a></li><li><a href="https://fisicisenzapalestra.com/pillole-di-scienza/" target="_self">Pillole di scienza</a></li><li><a href="https://fisicisenzapalestra.com/fisica/" target="_self">Fisica</a></li><li><a href="https://fisicisenzapalestra.com/chimica/" target="_self">Chimica</a></li><li><a href="https://fisicisenzapalestra.com/matematica/" target="_self">Matematica</a></li></ul></li><li><a href="https://fisicisenzapalestra.com/raccontipoesie/" target="_self">Racconti/poesie</a></li><li><a href="https://fisicisenzapalestra.com/musica/" target="_self">Musica</a></li><li><a href="https://fisicisenzapalestra.com/interviste/" target="_self">Interviste</a></li><li><a href="https://fisicisenzapalestra.com/filosofia/" target="_self">Filosofia</a></li><li><a href="https://fisicisenzapalestra.com/da-ex-studente-a-studente/" target="_self">Da (ex) studente a studente</a></li><li><a href="https://fisicisenzapalestra.com/arte/" target="_self">Arte</a></li><li><a href="https://fisicisenzapalestra.com/varie/" target="_self">Varie</a></li><li class="has-submenu"><span class="is-separator" aria-haspopup="true">Tecnologie</span><ul class="navbar__submenu level-3" aria-hidden="true"><li><a href="https://fisicisenzapalestra.com/tecnologia/" target="_self">Tecnologia</a></li><li><a href="https://fisicisenzapalestra.com/appunti-di-un-giovane-nerd/" target="_self">Appunti di un giovane nerd</a></li><li><a href="https://fisicisenzapalestra.com/arduino/" target="_self">Arduino</a></li></ul></li></ul></li><li><a href="https://fisicisenzapalestra.com/about.html" target="_self">About</a></li><li><a href="https://fisicisenzapalestra.com/collabora.html" target="_self">Collabora</a></li><li><a href="https://paypal.me/pools/c/8o8TxkLfAY" target="_blank">Aiutaci</a></li><li><a href="mailto:info@fisicisenzapalestra.com" target="_self">Contattaci</a></li><li><a href="https://tinyletter.com/fisicisenzapalestra" target="_self">Newsletter</a></li></ul></nav><div class="search"><div class="search__overlay js-search-overlay"><div class="search__overlay-inner"><form action="https://fisicisenzapalestra.com/search.html" class="search__form"><input class="search__input js-search-input" type="search" name="q" placeholder="search..." autofocus="autofocus"></form><button class="search__close js-search-close" aria-label="Close">Close</button></div></div><button class="search__btn js-search-btn" aria-label="[MISSING TRANSLATION]"><svg role="presentation" focusable="false" height="15px" width="15px"><use xlink:href="https://fisicisenzapalestra.com/assets/svg/svg-map.svg#search"/></svg></button></div></div></header><main><article class="post wrapper"><div class="hero hero--full"><header><h1>smartlight - Accendere un led dalla porta seriale - Fisici Senza Palestra</h1></header></div><div class="banner banner--before-post"><script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script><ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-3581868672336540" data-ad-slot="7784502790" data-ad-format="auto" data-full-width-responsive="true"></ins><script>(adsbygoogle = window.adsbygoogle || []).push({});</script></div><div class="post__entry"><p>Con questo articolo cominciamo un percorso che ci porterà alla scrittura di un semplice <strong>sistema </strong>(in quanto useremo un programma che da computer comunicherà con Arduino) per gestire un led tramite la porta seriale.</p><p>Battezziamo il programma come <strong>SmartLight</strong> (maccheronicamente <em>luce intelligente</em>) in quanto interagirà con l'ambiente tramite una fotoresistenza (<a href="http://it.wikipedia.org/wiki/Fotoresistenza" target="_blank" rel="noopener noreferrer">per chi non sapesse di cosa stiamo parlando, Wikipedia insegna</a>).</p><p>In questo primo articolo vedremo come creare il circuito e come interfacciarci con Arduino tramite la porta seriale.</p><h2>Lo sketch</h2><p>L'intestazione dello sketch è molto semplice. Dobbiamo specificare innanzitutto la posizione del LED, poi alcune costanti per riconoscere il segnale che invieremo tramite la porta seriale, ed infine delle variabili FLAG per constatare lo stato di alcuni procedimenti che chiariremo a breve.</p><pre lang="c"><code>int ledPin = 12; 
int letto;

const int acceso = 'a';
const int spento = 's';
const int crepuscolare = 'c';

int luce;
int stato;</code></pre><p>Nel <em>setup</em> dobbiamo invece impostare il pin in uscita del LED ed inizializzare la porta seriale, ovvero il ponte che permetterà la comunicazione tra il computer e l'Arduino. La terza funzione è un semplice esempio di come sia possibile far "scrivere" ad Arduino qualcosa dalla porta seriale.</p><pre lang="c">void setup() {

pinMode(ledPin, OUTPUT);
Serial.begin(9600);
Serial.println("Devi aprirmi per potermi usare, bravo!");

}</pre><p>Arriviamo finalmente al corpo del programma. Facciamo allora un piccolo brain storming.</p><p><em>Cosa deve fare questo programma? </em><br>Deve leggere un dato (che passeremo come numero) e reagire di conseguenza. Utilizzeremo quindi uno <em>switch</em>.</p><p><em>Come posso leggere dei dati in entrata?</em><br>C'è una funzione apposta, <strong>Serial.read()</strong>.</p><p>Bhè, ma allora è tutto super semplice!<br>Il programma legge i dati in entrata e ne memorizza il valore nella variabile <strong>letto</strong>. Dopo controlla se il valore letto (l'ovvio gioco di parole ci dimostra l'importanza dei nomi delle variabili nella programmazione) corrisponde a quello memorizzato nella variabile <strong>stato</strong> (che rappresenta la precedente impostazione del sistema). In questo caso non fa nulla.<br>In caso contrario deve selezionare il caso specifico e impostare il nuovo valore di <strong>stato</strong> (che sarà il metro di confronto del successivo controllo). Pensiamo al caso in cui impostiamo l'accensione crepuscolare.  L'unica difficoltà in più è quella di leggere il valore della fotoresistenza, controllare se esso supera un valore stabilito e quindi accendere o spegnere il LED.</p><pre lang="c">void loop() 
{

letto = Serial.read();

if ( (letto != spento) &amp;&amp; (letto!=acceso) &amp;&amp; (letto!=crepuscolare) ) letto = stato;

stato = letto ;

switch(letto) {

case acceso:

digitalWrite(ledPin, HIGH);

break;

case spento:

digitalWrite(ledPin, LOW);

break;

case crepuscolare:

luce = analogRead(0);
if (luce&lt;200) {
digitalWrite(ledPin, HIGH);
}
else {
digitalWrite(ledPin, LOW); 
delay(10); 

break;

  }
 }
}</pre><p>Siamo pronti per partire. Come possiamo interagire allora con Arduino? Dopo aver caricato il programma, basta cliccare in alto a destra sul pulsate <strong>Monitor seriale</strong>. Si aprirà una finestra all'interno della quale è possibile "parlare con" Arduino.</p><p>Dovrebbe quindi comparire il messaggio impostato nel setup. Ora, poiché qui non siamo maleducati, rispondiamogli con una delle tre lettere che abbiamo impostato l'intestazione, che corrispondono alle azioni stabilite.</p></div><aside><div class="post__share"><a href="https://www.facebook.com/sharer/sharer.php?u=https%3A%2F%2Ffisicisenzapalestra.com%2Fsmartlight-accendere-un-led-dalla-porta-seriale-parte-1.html" class="js-share facebook" title="Facebook" rel="nofollow noopener noreferrer"><svg aria-hidden="true" focusable="false" viewBox="0 0 32 32"><use xlink:href="https://fisicisenzapalestra.com/assets/svg/svg-map.svg#facebook"/></svg> Facebook </a><a href="https://twitter.com/share?url=https%3A%2F%2Ffisicisenzapalestra.com%2Fsmartlight-accendere-un-led-dalla-porta-seriale-parte-1.html&amp;via=fisiciSP&amp;text=smartlight%20-%20Accendere%20un%20led%20dalla%20porta%20seriale" class="js-share twitter" title="Twitter" rel="nofollow noopener noreferrer"><svg aria-hidden="true" focusable="false" viewBox="0 0 32 32"><use xlink:href="https://fisicisenzapalestra.com/assets/svg/svg-map.svg#twitter"/></svg> Twitter </a><a href="http://www.linkedin.com/shareArticle?url=https%3A%2F%2Ffisicisenzapalestra.com%2Fsmartlight-accendere-un-led-dalla-porta-seriale-parte-1.html&amp;title=smartlight%20-%20Accendere%20un%20led%20dalla%20porta%20seriale" class="js-share linkedin" title="LinkedIn" rel="nofollow noopener noreferrer"><svg aria-hidden="true" focusable="false" viewBox="0 0 32 32"><use xlink:href="https://fisicisenzapalestra.com/assets/svg/svg-map.svg#linkedin"/></svg> LinkedIn </a><a href="https://wa.me/?text=smartlight%20-%20Accendere%20un%20led%20dalla%20porta%20seriale https%3A%2F%2Ffisicisenzapalestra.com%2Fsmartlight-accendere-un-led-dalla-porta-seriale-parte-1.html" class="js-share whatsapp" rel="nofollow noopener noreferrer"><svg aria-hidden="true" focusable="false" viewBox="0 0 32 32"><use xlink:href="https://fisicisenzapalestra.com/assets/svg/svg-map.svg#whatsapp"/></svg> WhatsApp</a></div></aside><footer><div class="post__bio"><img src="https://fisicisenzapalestra.com/media/website/lozioraf.jpg" loading="lazy" alt="Raffaele Farinaro"><h3><a href="https://fisicisenzapalestra.com/authors/raffaele-farinaro/" class="inverse" title="Raffaele Farinaro">Raffaele Farinaro</a></h3><p>Se il blog esiste è solo colpa sua. Mezzo campano e mezzo abruzzese ha la fissa per gli ologrammi, la divulgazione scientifica e Iron Man. E la pizza.</p></div><ul class="post__tag"><li><a href="https://fisicisenzapalestra.com/arduino/">Arduino</a></li></ul><nav class="post__nav"><div class="post__nav__prev">Previous Post<h3 class="h5"><a href="https://fisicisenzapalestra.com/fisica-della-fine-dell-universo.html" class="inverse" rel="prev">La fine di Gaia non arriverà: fisica della fine dell&#x27;universo</a></h3></div><div class="post__nav__next">Next Post<h3 class="h5"><a href="https://fisicisenzapalestra.com/puoi-vedere-cio-che-non-esiste.html" class="inverse" rel="next">Puoi vedere ciò che non esiste?</a></h3></div></nav><div class="post__related"><h3>Related posts</h3><div class="post__related__wrap"><figure><a href="https://fisicisenzapalestra.com/un-fluido-dalla-massa-negativa.html"><img src="https://fisicisenzapalestra.com/media/posts/202/responsive/massa_negativa-xs.jpg" loading="lazy" alt=""></a><figcaption><time datetime="2020-04-14T12:00">14/04/2020</time><h4><a href="https://fisicisenzapalestra.com/un-fluido-dalla-massa-negativa.html" class="inverse">Un fluido dalla massa negativa?</a></h4></figcaption></figure><figure><a href="https://fisicisenzapalestra.com/perche-trappist1-e-cosi-importante.html"><img src="https://fisicisenzapalestra.com/media/posts/192/responsive/esopianeti-xs.jpg" loading="lazy" alt=""></a><figcaption><time datetime="2020-04-14T11:48">14/04/2020</time><h4><a href="https://fisicisenzapalestra.com/perche-trappist1-e-cosi-importante.html" class="inverse">Perché Trappist1 è così importante</a></h4></figcaption></figure><figure><a href="https://fisicisenzapalestra.com/quando-la-terra-ruggisce.html"><img src="https://fisicisenzapalestra.com/media/posts/61/responsive/ruggisce_terra-xs.jpg" loading="lazy" alt=""></a><figcaption><time datetime="2020-04-14T11:09">14/04/2020</time><h4><a href="https://fisicisenzapalestra.com/quando-la-terra-ruggisce.html" class="inverse">Quando la terra ruggisce: dalla bomba Tsar al Krakatoa</a></h4></figcaption></figure></div></div></footer></article><div class="comments wrapper"><h3>Comments</h3><div id="disqus_thread"></div><script>var disqus_config = function () {
                    this.page.url = 'https://fisicisenzapalestra.com/smartlight-accendere-un-led-dalla-porta-seriale-parte-1.html';
            		this.page.identifier = '37';
                    this.page.title = ' smartlight - Accendere un led dalla porta seriale';
                };
            
                var disqus_loaded = false;
            
                function publiiLoadDisqus() {
                    if(disqus_loaded) {
                        return false;
                    }
            
                    var top = document.getElementById('disqus_thread').offsetTop;
            
                    if (!disqus_loaded && (window.scrollY || window.pageYOffset) + window.innerHeight > top) {
                        disqus_loaded = true;
            
                        (function () {
                            var d = document, s = d.createElement('script');
                            s.src = 'https://fisicisenzapalestra.disqus.com/embed.js';
                            s.setAttribute('data-timestamp', +new Date());
                            (d.head || d.body).appendChild(s);
                        })();
                    }
                }
            
                publiiLoadDisqus();
            
                window.onscroll = function() {
                    publiiLoadDisqus();
                };</script><noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript" rel="nofollow">comments powered by Disqus.</a></noscript></div><div class="banner banner--after-post"><script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script><ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-3581868672336540" data-ad-slot="9313911724" data-ad-format="auto" data-full-width-responsive="true"></ins><script>(adsbygoogle = window.adsbygoogle || []).push({});</script></div></main></div><footer class="footer"><div class="footer__copyright"><p>PROGETTO OPEN CULTURE IDEATO DA <a href="https://www.linkedin.com/in/raffaele-farinaro/" target="_blank" rel="noopener">RAFFAELE FARINARO</a> ED <a href="https://www.linkedin.com/in/anna-chiara-giovannelli-a0165b89/" target="_blank" rel="noopener">ANNA CHIARA GIOVANNELLI</a>.</p></div><div class="footer__social"><a href="https://www.facebook.com/fisicisenzapalestra/" aria-label="Facebook" class="facebook"><svg><use xlink:href="https://fisicisenzapalestra.com/assets/svg/svg-map.svg#facebook"/></svg> </a><a href="https://twitter.com/fisicisp" aria-label="Twitter" class="twitter"><svg><use xlink:href="https://fisicisenzapalestra.com/assets/svg/svg-map.svg#twitter"/></svg> </a><a href="https://www.instagram.com/fisicisenzapalestra/" aria-label="Instagram" class="instagram"><svg><use xlink:href="https://fisicisenzapalestra.com/assets/svg/svg-map.svg#instagram"/></svg> </a><a href="https://www.youtube.com/user/fisicisenzapalestra" aria-label="Youtube" class="youtube"><svg><use xlink:href="https://fisicisenzapalestra.com/assets/svg/svg-map.svg#youtube"/></svg></a></div><button class="footer__bttop js-footer__bttop" aria-label="Back to top"><svg><title>Back to top</title><use xlink:href="https://fisicisenzapalestra.com/assets/svg/svg-map.svg#toparrow"/></svg></button></footer><script>window.publiiThemeMenuConfig = {    
        mobileMenuMode: 'sidebar',
        animationSpeed: 300,
        submenuWidth: 'auto',
        doubleClickTime: 500,
        mobileMenuExpandableSubmenus: true, 
        relatedContainerForOverlayMenuSelector: '.top',
   };</script><script defer="defer" src="https://fisicisenzapalestra.com/assets/js/scripts.min.js?v=5d019933b6731dd473124509e9694309"></script><script>var images = document.querySelectorAll('img[loading]');

        for (var i = 0; i < images.length; i++) {
            if (images[i].complete) {
                images[i].classList.add('is-loaded');
            } else {
                images[i].addEventListener('load', function () {
                    this.classList.add('is-loaded');
                }, false);
            }
        }</script><div class="cookie-popup js-cookie-popup cookie-popup--uses-badge"><h2>Questo sito utilizza cookies</h2><p>Continuando, stai accettando questo inevitabile fatto. <a href="https://fisicisenzapalestra.com/privacy-policy.html">Ulteriori informazioni</a></p><form><input id="gdpr-necessary" name="gdpr-necessary" checked="checked" disabled="disabled" type="checkbox"> <label for="gdpr-necessary">Required</label><p class="cookie-popup__save-wrapper"><button type="submit" class="cookie-popup__save">Ricevuto!</button></p></form><span class="cookie-popup-label">Cookie Policy</span></div><script>(function() {
                function addScript (src, inline) {
                    var newScript = document.createElement('script');

                    if (src) {
                        newScript.setAttribute('src', src);
                    }

                    if (inline) {
                        newScript.text = inline;
                    }

                    document.body.appendChild(newScript);
                }

                var popup = document.querySelector('.js-cookie-popup');
                var checkboxes = popup.querySelectorAll('input[type="checkbox"]');
                var save = popup.querySelector('button');
                var currentConfig = localStorage.getItem('publii-gdpr-allowed-cookies');
                var blockedScripts = document.querySelectorAll('script[type^="gdpr-blocker/"]');
                

                popup.addEventListener('click', function() {
                    if (!popup.classList.contains('cookie-popup--is-sticky')) {
                        popup.classList.add('cookie-popup--is-sticky');
                    }
                });

                save.addEventListener('click', function(e) {
                    e.preventDefault();
                    e.stopPropagation();
                    popup.classList.remove('cookie-popup--is-sticky');
                    var allowedGroups = [];

                    for (var i = 0; i < checkboxes.length; i++) {
                        if (checkboxes[i].checked) {
                            var groupName = checkboxes[i].getAttribute('name').replace('gdpr-', '');
                            var scripts = document.querySelectorAll('script[type="gdpr-blocker/' + groupName + '"]');

                            for (var j = 0; j < scripts.length; j++) {
                                addScript(scripts[j].src, scripts[j].text);
                            }

                            allowedGroups.push(groupName);
                        }
                    }

                    localStorage.setItem('publii-gdpr-allowed-cookies', allowedGroups.join(','));
                    popup.classList.remove('cookie-popup--is-sticky');

                    setTimeout(function () {
                        if (currentConfig !== null) {
                            window.location.reload();
                        }
                    }, 250);
                });

                if (currentConfig === null) {
                    popup.classList.add('cookie-popup--is-sticky');
                } else {
                    if (currentConfig !== '') {
                        var allowedGroups = currentConfig.split(',');

                        for (var i = 0; i < allowedGroups.length; i++) {
                            var scripts = document.querySelectorAll('script[type="gdpr-blocker/' + allowedGroups[i] + '"]');
                            var checkbox = popup.querySelector('input[type="checkbox"][name="gdpr-' + allowedGroups[i] + '"]');

                            if (checkbox) {
                                checkbox.checked = true;
                            }

                            for (var j = 0; j < scripts.length; j++) {
                                addScript(scripts[j].src, scripts[j].text);
                            }
                        }
                    }
                }
            })();</script></body></html>